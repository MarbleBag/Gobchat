<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <button class="ui-btn-copyprofile" id="croleplay_copyprofile"><i class="fas fa-clone"></i></button>

    <p>
        <div></div>
    </p>
    <p>
        <table id="croleplay_roleplay">
            <thead>
                <tr>
                    <th>Channel Name</th>
                    <th>Text Color</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </p>

    <template id="croleplay_template_segmententry">
        <tr>
            <td>
                <label class="entry-label"></label>
            </td>
            <td>
                <div>
                    <input class="entry-color-forground" type="text" />
                    <button class="entry-color-forground-reset ui-gc-btn"
                            title="Resets the field to its default value">
                        <i class='fas fa-undo-alt'></i>
                    </button>
                </div>
            </td>
        </tr>
    </template>

    <script type="text/javascript">
        'use strict';

        (function () {
            const segments = [
                { label: "Say", styleId: "style.segment.say" },
                { label: "Emote", styleId: "style.segment.emote" },
                { label: "OoC", styleId: "style.segment.ooc" },
                { label: "Mention", styleId: "style.segment.mention" },
            ]

            const table = $("#croleplay_roleplay > tbody")
            const rowTemplate = $('#croleplay_template_segmententry')
            segments.forEach((entry) => {
                const rowEntry = $(rowTemplate.html()).appendTo(table)

                const lblName = rowEntry.find(".entry-label")
                const clrSelectorFG = rowEntry.find(".entry-color-forground")
                const btnResetFG = rowEntry.find(".entry-color-forground-reset")

                lblName.text(entry.label)

                clrSelectorFG.attr(ConfigHelper.ConfigKeyAttribute, entry.styleId + ".color")
                ConfigHelper.makeAndBindColorSelector(clrSelectorFG)
                btnResetFG.on("click", event => gobconfig.reset(clrSelectorFG.attr(ConfigHelper.ConfigKeyAttribute)))
            })

            const btnCopyProfile = $("#croleplay_copyprofile")
            const copyKeys = []
            segments.forEach(entry => {
                if (entry.styleId === undefined || entry.styleId === null) return
                copyKeys.push(entry.styleId + ".color")
            })
            ConfigHelper.makeCopyProfileButton(btnCopyProfile, { configKeys: copyKeys })

        }())
    </script>
</body>
</html>